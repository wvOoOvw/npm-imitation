!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react")):"function"==typeof define&&define.amd?define(["react"],t):"object"==typeof exports?exports.Imitation=t(require("react")):e.Imitation=t(e.react)}(self,(function(e){return(()=>{"use strict";var t={156:t=>{t.exports=e}},n={};function r(e){var o=n[e];if(void 0!==o)return o.exports;var i=n[e]={exports:{}};return t[e](i,i.exports,r),i.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var o={};return(()=>{r.d(o,{default:()=>y});var e=Symbol("_Allow");function t(e){this.ImitationInstance=e,this.dependenceQueue=[],this.monitorQueue=[]}t.prototype.dispatch=function(){var t=this;this.monitorQueue.forEach((function(n,r){var o,i,u=t.dependenceQueue[r],c=t.executeDependence(n.dependence);return c===e||Array.isArray(c)&&Array.isArray(u)&&(o=c,i=u,Array.isArray(o)&&Array.isArray(i)&&(o.length!==i.length||o.filter((function(e,t){return e===i[t]})).length!==o.length))?(t.executeEvent(n.event),void(t.dependenceQueue[r]=c)):(Array.isArray(c)||Array.isArray(u)||c===u||t.executeEvent(n.event),void(t.dependenceQueue[r]=c))}))},t.prototype.register=function(t){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,o={event:t,dependence:r};return this.monitorQueue.push(o),this.dependenceQueue.push(this.executeDependence(r)),function(){n.monitorQueue.forEach((function(e,t){e===o&&(n.monitorQueue=n.monitorQueue.filter((function(e,n){return n!==t})),n.dependenceQueue=n.dependenceQueue.filter((function(e,n){return n!==t})))}))}},t.prototype.executeEvent=function(e){e(this.ImitationInstance.state)},t.prototype.executeDependence=function(e){return"function"==typeof e?e(this.ImitationInstance.state):e};const n=t;var i=r(156),u=r.n(i);function c(e){return function(e){if(Array.isArray(e))return f(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||s(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],u=!0,c=!1;try{for(n=n.call(e);!(u=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{u||null==n.return||n.return()}finally{if(c)throw o}}return i}}(e,t)||s(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){if(e){if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(e,t):void 0}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function p(e){this.MonitorInstance=e}p.prototype.withBindComponent=function(e,t){var n=this;return function(r){var o=a(u().useState(performance.now()),2),i=(o[0],o[1]),c=u().useMemo((function(){return n.MonitorInstance.register((function(){return i(performance.now())}),t)}),[]);return u().useEffect((function(){return function(){return c()}}),[]),u().createElement(e,r)}},p.prototype.useBindComponent=function(e){var t=a(u().useState(performance.now()),2),n=(t[0],t[1]),r=u().useMemo((function(){return Instance.MonitorInstance.register((function(){return n(performance.now())}),e)}),[]);u().useEffect((function(){return function(){return r()}}),[])},p.prototype.withBindComponentPure=function(e,t){return function(n){var r=a(u().useState(performance.now()),2),o=(r[0],r[1]),i=u().useMemo((function(){return t.reduce((function(e,t){return[].concat(c(e),[t.instance.register((function(){return o(performance.now())}),t.dependence)])}),[])}),[t]);return u().useEffect((function(){return function(){return i.forEach((function(e){return e()}))}}),[t]),u().createElement(e,n)}},p.prototype.useBindComponentPure=function(e){var t=a(u().useState(performance.now()),2),n=(t[0],t[1]),r=u().useMemo((function(){return e.reduce((function(e,t){return[].concat(c(e),[t.instance.register((function(){return n(performance.now())}),t.dependence)])}),[])}),[e]);u().useEffect((function(){return function(){return r.forEach((function(e){return e()}))}}),[e])};const d=p;function l(e){this.state=e,this.MonitorInstance=new n(this),this.ReactBindComponentInstance=new d(this.MonitorInstance)}l.prototype.setState=function(e){this.state="function"==typeof e?e(this.state):e,this.dispatch()},l.prototype.assignState=function(e){this.state=Object.assign(this.state,"function"==typeof e?e(this.state):e),this.dispatch()},l.prototype.register=function(){var e;return(e=this.MonitorInstance).register.apply(e,arguments)},l.prototype.dispatch=function(){var e;return(e=this.MonitorInstance).dispatch.apply(e,arguments)},l.prototype.withBindComponent=function(){var e;return(e=this.ReactBindComponentInstance).withBindComponent.apply(e,arguments)},l.prototype.useBindComponent=function(){var e;return(e=this.ReactBindComponentInstance).useBindComponent.apply(e,arguments)};const y=l})(),o.default})()}));